import{r,j as s,L as P,u as S,a as $}from"./index-Bb4YV97Y.js";import{M as k,u as L,P as z,a as B,L as D,m as I,B as G}from"./Button-vCu4F1i_.js";class K extends r.Component{getSnapshotBeforeUpdate(o){const e=this.props.childRef.current;if(e&&o.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:t,isPresent:o}){const e=r.useId(),n=r.useRef(null),u=r.useRef({width:0,height:0,top:0,left:0}),{nonce:x}=r.useContext(k);return r.useInsertionEffect(()=>{const{width:m,height:i,top:f,left:g}=u.current;if(o||!n.current||!m||!i)return;n.current.dataset.motionPopId=e;const a=document.createElement("style");return x&&(a.nonce=x),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${i}px !important;
            top: ${f}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[o]),s.jsx(K,{isPresent:o,childRef:n,sizeRef:u,children:r.cloneElement(t,{ref:n})})}const U=({children:t,initial:o,isPresent:e,onExitComplete:n,custom:u,presenceAffectsLayout:x,mode:m})=>{const i=L(_),f=r.useId(),g=r.useMemo(()=>({id:f,initial:o,isPresent:e,custom:u,onExitComplete:a=>{i.set(a,!0);for(const c of i.values())if(!c)return;n&&n()},register:a=>(i.set(a,!1),()=>i.delete(a))}),x?[Math.random()]:[e]);return r.useMemo(()=>{i.forEach((a,c)=>i.set(c,!1))},[e]),r.useEffect(()=>{!e&&!i.size&&n&&n()},[e]),m==="popLayout"&&(t=s.jsx(T,{isPresent:e,children:t})),s.jsx(z.Provider,{value:g,children:t})};function _(){return new Map}const j=t=>t.key||"";function N(t){const o=[];return r.Children.forEach(t,e=>{r.isValidElement(e)&&o.push(e)}),o}const A=({children:t,exitBeforeEnter:o,custom:e,initial:n=!0,onExitComplete:u,presenceAffectsLayout:x=!0,mode:m="sync"})=>{const i=r.useMemo(()=>N(t),[t]),f=i.map(j),g=r.useRef(!0),a=r.useRef(i),c=L(()=>new Map),[R,M]=r.useState(i),[h,v]=r.useState(i);B(()=>{g.current=!1,a.current=i;for(let d=0;d<h.length;d++){const l=j(h[d]);f.includes(l)?c.delete(l):c.get(l)!==!0&&c.set(l,!1)}},[h,f.length,f.join("-")]);const C=[];if(i!==R){let d=[...i];for(let l=0;l<h.length;l++){const p=h[l],w=j(p);f.includes(w)||(d.splice(l,0,p),C.push(p))}m==="wait"&&C.length&&(d=C),v(N(d)),M(i);return}const{forceRender:y}=r.useContext(D);return s.jsx(s.Fragment,{children:h.map(d=>{const l=j(d),p=i===h||f.includes(l),w=()=>{if(c.has(l))c.set(l,!0);else return;let E=!0;c.forEach(b=>{b||(E=!1)}),E&&(y==null||y(),v(a.current),u&&u())};return s.jsx(U,{isPresent:p,initial:!g.current||n?void 0:!1,custom:p?void 0:e,presenceAffectsLayout:x,mode:m,onExitComplete:p?void 0:w,children:d},l)})})},F=({exp:t,index:o})=>{const[e,n]=r.useState(!1);let u=new Date(t.date).toLocaleDateString("en-GB");return setTimeout(()=>{n(!0)},(o+1)*100),s.jsx(P,{to:"./add",state:t,className:"w-full",children:s.jsx("li",{className:`bg-white translate-x-${e?0:"full"} duration-[1500ms] transition-all `,children:s.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:t.name}),s.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 text-nowrap",children:[t.type," "]})]}),s.jsx("p",{className:"mt-2 text-sm font-medium text-gray-500",children:u}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-500",children:['סכו"ם: ',s.jsxs("span",{className:"text-green-600",children:[t.amount.toLocaleString()," ₪"]})]}),s.jsx("span",{className:"font-medium text-indigo-600 hover:text-indigo-500",children:t.whos})]})]})})})},W=()=>{const t=S(),o=$();return console.log("first",t),s.jsxs("div",{className:"p-8 h-full flex flex-col items-center gap-3 justify-between",children:[s.jsx(A,{children:s.jsx("ul",{className:"shadow overflow-auto rounded-md max-w-sm mx-auto min-w-64 ",children:t==null?void 0:t.map((e,n)=>s.jsx(I.div,{initial:{x:"-100%"},animate:{x:"0%"},transition:{delay:n/8},children:s.jsx(F,{exp:e,index:n},e._id)}))})}),s.jsx("p",{className:"text-xl font-extrabold ",children:`סה"כ: ${t.reduce((e,n)=>e+n.amount,0).toLocaleString()} ₪`}),s.jsx(G,{type:"button",onClick:()=>o("add"),children:"להוספה +  "})]})};export{W as default};
